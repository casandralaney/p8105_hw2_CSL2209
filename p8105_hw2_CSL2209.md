p8105_hw2_CSL2209
================
Casandra Laney
2025-10-01

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
library(haven)
```

## Problem 1

clean the data in pols-month.csv

``` r
pols_month_df = read.csv("data/pols-month.csv") |>
  janitor::clean_names() |>
  separate(mon, into = c("year", "month", "day"), sep = '-'
  ) |>
  mutate(
    month =
      case_match(
        month,
        "01" ~ "jan",
        "02" ~ "feb",
        "03" ~ "mar",
        "04" ~ "apr",
        "05" ~ "may",
        "06" ~ "jun",
        "07" ~ "jul",
        "08" ~ "aug",
        "09" ~ "sept",
        "10" ~ "oct",
        "11" ~ "nov",
        "12" ~ "dec"),
    month = as.factor(month),
    year = as.integer(year),
    day = as.integer(day),
    president = 
      case_match (
        prez_gop,
        1 ~ "gop",
        0 ~ "dem")) |>
  select(-day, -prez_dem, -prez_gop)
```

clean the data in snp.csv

``` r
snp_df = read.csv("data/snp.csv") |>
  janitor::clean_names() |>
  separate(date, into = c("month", "day", "year"), sep = '/') |>
  mutate(
    month =
      case_match(
        month,
        "1" ~ "jan",
        "2" ~ "feb",
        "3" ~ "mar",
        "4" ~ "apr",
        "5" ~ "may",
        "6" ~ "jun",
        "7" ~ "jul",
        "8" ~ "aug",
        "9" ~ "sept",
        "10" ~ "oct",
        "11" ~ "nov",
        "12" ~ "dec"),
    month = as.factor(month),
    year = as.integer(year),
    day = as.integer(day),
    year = ifelse(year < 50, year + 2000, year + 1900)
  ) |>
  select(year, month, close, -day) 
```

tidy the unemployment data

``` r
unemployment_df = read.csv("data/unemployment.csv") |>
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment")
```

Join the datasets

``` r
pols_snp = left_join(pols_month_df, snp_df, by = c("year", "month"))

five_thirty_eight = left_join(pols_snp, unemployment_df, by = c("year", "month"))
```

About these datasets

## Problem 2

Read and clean the Mr. Trash, Professor, and Gwynnda sheets

``` r
mr_trash_wheel = 
  read_excel("data/202509 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", skip = 1) |>
  janitor::clean_names() |>
  select(-x15, -x16) |>
  drop_na(dumpster) |>
  mutate(
    month = as.factor(month),
    year = as.integer(year),
    sports_balls = as.integer(sports_balls),
    wheel = "mr_trash") 
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
professor_trash_wheel = 
  read_excel("data/202509 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", skip = 1) |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(
    month = as.factor(month),
    year = as.integer(year),
    wheel = "professor"
  )
  
gwynnda = 
  read_excel("data/202509 Trash Wheel Collection Data.xlsx", sheet = "Gwynns Falls Trash Wheel", skip = 1) |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(
    month = as.factor(month),
    year = as.integer(year),
    wheel = "gwynnda"
  )
```

Combine the three datasets into one

``` r
tidy_wheels = 
  bind_rows(mr_trash_wheel, professor_trash_wheel, gwynnda) |>
  janitor::clean_names()
```

## Problem 3

Import, clean, and tidy

``` r
zori = read_csv("data/zillow_data/Zip_zori_uc_sfrcondomfr_sm_month_NYC.csv") |>
  janitor::clean_names() |>
  drop_na() |>
  pivot_longer(
    x2015_01_31:x2024_08_31,
    names_to = "date", 
    values_to = "zori"
    ) |>
    mutate(
      date = str_remove(date, "^x"),
      zip_code = as.factor(region_name)) |>
  select(-region_name, -region_type)
```

    ## Rows: 149 Columns: 125
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr   (6): RegionType, StateName, State, City, Metro, CountyName
    ## dbl (119): RegionID, SizeRank, RegionName, 2015-01-31, 2015-02-28, 2015-03-3...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
zip_codes = read_csv("data/zillow_data/Zip Codes.csv") |>
  janitor::clean_names() |>
  mutate(
    zip_code = as.factor(zip_code)) |>
  select(-file_date)
```

    ## Rows: 322 Columns: 7
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (4): County, County Code, File Date, Neighborhood
    ## dbl (3): State FIPS, County FIPS, ZipCode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
