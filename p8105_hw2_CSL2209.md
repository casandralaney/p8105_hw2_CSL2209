p8105_hw2_CSL2209
================
Casandra Laney
2025-10-01

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
library(haven)
```

## Problem 1

clean the data in pols-month.csv

``` r
pols_month_df = read.csv("data/pols-month.csv") |>
  janitor::clean_names() |>
  separate(mon, into = c("year", "month", "day"), sep = '-'
  ) |>
  mutate(
    month =
      case_match(
        month,
        "01" ~ "jan",
        "02" ~ "feb",
        "03" ~ "mar",
        "04" ~ "apr",
        "05" ~ "may",
        "06" ~ "jun",
        "07" ~ "jul",
        "08" ~ "aug",
        "09" ~ "sept",
        "10" ~ "oct",
        "11" ~ "nov",
        "12" ~ "dec"),
    month = as.factor(month),
    year = as.integer(year),
    day = as.integer(day),
    president = 
      case_match (
        prez_gop,
        1 ~ "gop",
        0 ~ "dem")) |>
  select(-day, -prez_dem, -prez_gop)
```

clean the data in snp.csv

``` r
snp_df = read.csv("data/snp.csv") |>
  janitor::clean_names() |>
  separate(date, into = c("month", "day", "year"), sep = '/') |>
  mutate(
    month =
      case_match(
        month,
        "1" ~ "jan",
        "2" ~ "feb",
        "3" ~ "mar",
        "4" ~ "apr",
        "5" ~ "may",
        "6" ~ "jun",
        "7" ~ "jul",
        "8" ~ "aug",
        "9" ~ "sept",
        "10" ~ "oct",
        "11" ~ "nov",
        "12" ~ "dec"),
    month = as.factor(month),
    year = as.integer(year),
    day = as.integer(day),
    year = ifelse(year < 50, year + 2000, year + 1900)
  ) |>
  select(year, month, close, -day) 
```

tidy the unemployment data

``` r
unemployment_df = read.csv("data/unemployment.csv") |>
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment")
```

Join the datasets

``` r
pols_snp = left_join(pols_month_df, snp_df, by = c("year", "month"))

five_thirty_eight = left_join(pols_snp, unemployment_df, by = c("year", "month"))
```

About these datasets

The dataset ‘five_thirty_eight’ consists of pols_month_df, snp_df, and
unemployment_df. Pols_df contains information related to the number of
national politicians who are democratic or republican. snp_df contains
information related to Standard and Poor’s stock market index.
unemployment_df contains the percentage of unemployment in the
respective year and month.The ’five_thirty_eight’dataset consists of 822
observations and 11 variables. Some important variables include:

- year: year of count

- month: month of count

- president: political party of president at the time

- close: the closing values of S&P stock index

- unemployment: unemployment percentage of respective year/month.

## Problem 2

Read and clean the Mr. Trash, Professor, and Gwynnda sheets

``` r
mr_trash_wheel = 
  read_excel("data/202509 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", skip = 1) |>
  janitor::clean_names() |>
  select(-x15, -x16) |>
  drop_na(dumpster) |>
  mutate(
    month = as.factor(month),
    year = as.integer(year),
    sports_balls = as.integer(sports_balls),
    wheel = "mr_trash") 
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
professor_trash_wheel = 
  read_excel("data/202509 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", skip = 1) |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(
    month = as.factor(month),
    year = as.integer(year),
    wheel = "professor"
  )
  
gwynnda = 
  read_excel("data/202509 Trash Wheel Collection Data.xlsx", sheet = "Gwynns Falls Trash Wheel", skip = 1) |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(
    month = as.factor(month),
    year = as.integer(year),
    wheel = "gwynnda"
  )
```

Combine the three datasets into one

``` r
tidy_wheels = 
  bind_rows(mr_trash_wheel, professor_trash_wheel, gwynnda) |>
  janitor::clean_names()
```

The dataset tidy_wheels consists of 1188 observations and 15 variables.
Key variables include:

- dumpster: which dumpster the trash was collected from

- wheel: which wheel the trash was collected from

- year: year trash was collected

- month: month trash was collected

- weight_tons: weight of total trash in tons

The total weight of trash collected by Professor Trash Wheel was 282.26
tons. The total number of cigarette butts collected by Gwynnda in June
of 2022 was 1.812^{4} cigarette butts.

## Problem 3

Import, clean, and tidy

``` r
zori = read_csv("data/zillow_data/Zip_zori_uc_sfrcondomfr_sm_month_NYC.csv") |>
  janitor::clean_names() |>
  drop_na() |>
  pivot_longer(
    x2015_01_31:x2024_08_31,
    names_to = "date", 
    values_to = "zori"
    ) |>
    mutate(
      date = str_remove(date, "^x"),
      zip_code = as.factor(region_name)) |>
  select(-region_name, -region_type, -state, -city, -state_name, -county_name, -metro)
```

    ## Rows: 149 Columns: 125
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr   (6): RegionType, StateName, State, City, Metro, CountyName
    ## dbl (119): RegionID, SizeRank, RegionName, 2015-01-31, 2015-02-28, 2015-03-3...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
zip_codes = read_csv("data/zillow_data/Zip Codes.csv") |>
  janitor::clean_names() |>
  mutate(
    zip_code = as.factor(zip_code),
    neighborhood = as.factor(neighborhood),
    ) |>
  select(-file_date)
```

    ## Rows: 322 Columns: 7
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (4): County, County Code, File Date, Neighborhood
    ## dbl (3): State FIPS, County FIPS, ZipCode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
tidy_zillow =
  zori |>
  left_join(zip_codes, by = "zip_code") |>
  select(date, zip_code, neighborhood, county, zori, state_fips, county_code, county_fips, region_id, size_rank)
```

    ## Warning in left_join(zori, zip_codes, by = "zip_code"): Detected an unexpected many-to-many relationship between `x` and `y`.
    ## ℹ Row 1277 of `x` matches multiple rows in `y`.
    ## ℹ Row 56 of `y` matches multiple rows in `x`.
    ## ℹ If a many-to-many relationship is expected, set `relationship =
    ##   "many-to-many"` to silence this warning.

``` r
skimr::skim(tidy_zillow)
```

|                                                  |             |
|:-------------------------------------------------|:------------|
| Name                                             | tidy_zillow |
| Number of rows                                   | 5684        |
| Number of columns                                | 10          |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_   |             |
| Column type frequency:                           |             |
| character                                        | 3           |
| factor                                           | 2           |
| numeric                                          | 5           |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ |             |
| Group variables                                  | None        |

Data summary

**Variable type: character**

| skim_variable | n_missing | complete_rate | min | max | empty | n_unique | whitespace |
|:--------------|----------:|--------------:|----:|----:|------:|---------:|-----------:|
| date          |         0 |             1 |  10 |  10 |     0 |      116 |          0 |
| county        |         0 |             1 |   5 |   8 |     0 |        3 |          0 |
| county_code   |         0 |             1 |   3 |   3 |     0 |        3 |          0 |

**Variable type: factor**

| skim_variable | n_missing | complete_rate | ordered | n_unique | top_counts |
|:---|---:|---:|:---|---:|:---|
| zip_code | 0 | 1.00 | FALSE | 48 | 112: 232, 100: 116, 100: 116, 100: 116 |
| neighborhood | 116 | 0.98 | FALSE | 19 | Nor: 696, Che: 464, Bus: 348, Cen: 348 |

**Variable type: numeric**

| skim_variable | n_missing | complete_rate | mean | sd | p0 | p25 | p50 | p75 | p100 | hist |
|:---|---:|---:|---:|---:|---:|---:|---:|---:|---:|:---|
| zori | 0 | 1 | 3124.18 | 709.35 | 1621.01 | 2568.54 | 3107.6 | 3552.58 | 5739.83 | ▃▇▆▂▁ |
| state_fips | 0 | 1 | 36.00 | 0.00 | 36.00 | 36.00 | 36.0 | 36.00 | 36.00 | ▁▁▇▁▁ |
| county_fips | 0 | 1 | 36057.08 | 9.01 | 36047.00 | 36047.00 | 36061.0 | 36061.00 | 36081.00 | ▅▁▇▁▁ |
| region_id | 0 | 1 | 75605.29 | 66829.93 | 61615.00 | 61636.00 | 61654.0 | 62032.00 | 399546.00 | ▇▁▁▁▁ |
| size_rank | 0 | 1 | 1952.00 | 2369.31 | 19.00 | 222.00 | 1114.0 | 2723.00 | 10508.00 | ▇▂▁▁▁ |

The ‘tidy_zillow’ dataset shows the neighborhood, zip code, and ZORI at
a given date in NYC. the ZORI is the Zillow Observed Rent Index, which
is a measure of the market rate rent across a region.

Some important variables include:

- date: date of observation

- zip code: zip code of area of focus

- neighborhood: neighborhood of area of focus

- county: county of area of focus

- zori: the ZORI of area of focus.

The tidy_zillow dataset consists of 5684 observations and 10 variables.
There are a total of 48 unique ZIP codes and 19 unique neighborhoods.
